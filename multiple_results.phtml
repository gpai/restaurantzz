<!DOCTYPE html>
<html>
  <head>
    <title>Restaurantzz</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="css/styles.css" />
  </head>
  <body>
	<div id="error">
		<?php
			if (! empty ( $errorArray )) {
				foreach ( $errorArray as $error ) { ?><h4> <?php
					echo $error ?></h4><?php
				}
			}
		?>
	</div>
	<h3>Please Enter a location. Please ensure to click on the search button. It will not work otherwise.</h3>
    <form action="" method= "get" id="createQuery">
      <input type="text" id="locationQuery" name ="location" placeholder="Enter Location" />
	  <input type="hidden" id="latitude" name="lat" />
	  <input type="hidden" id="longitude" name="long" />     
      <input type="button" value="Search" onclick="getLatLong()"/>
    </form>
    
  </body>
  <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"></script>
  <script type="text/javascript">
  	function getLatLong(){
  		var address = document.getElementById('locationQuery').value;
		var geo = new google.maps.Geocoder;
      	geo.geocode({'address':address},function(results, status){
              if (status == google.maps.GeocoderStatus.OK) {
	              	document.getElementById('latitude').value = results[0].geometry.location['k'];
	              	document.getElementById('longitude').value = results[0].geometry.location['A'];
	              	
	              	// console.log(results,status);
	              	console.log('latitude: '+encodeURI(document.getElementById('latitude').value));
	              	console.log('longitude: '+encodeURI(document.getElementById('longitude').value));
// 	              	
	              	// console.log(results[0].geometry.location['k']); //longitude -> don't use this - use the two above
	              	// console.log(results[0].geometry.location['A']); //latitude -> don't use this- use the two above
	              	
	              	document.getElementById("createQuery").submit();
              } else {
                //alert("Geocode was not successful for the following reason: " + status);
                alert("Ooops, something went wrong. Please input another location.");
              }

       });
  }
  </script>
</html>

